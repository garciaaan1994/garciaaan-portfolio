<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>データデバッグコンソール</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .script-box {
            background: #333;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }
        
        .script-title {
            color: #4caf50;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .script-code {
            background: #222;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            color: #0f0;
            overflow-x: auto;
            white-space: pre;
        }
        
        .btn {
            background: #4caf50;
            border: none;
            color: #000;
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔧 データデバッグコンソール</h1>
        
        <p>ブラウザの開発者ツール（F12）でConsoleタブを開いて、以下のコードを実行してください：</p>
        
        <div class="script-box">
            <div class="script-title">1. 現在のデータを確認</div>
            <div class="script-code">console.log('Current data:', JSON.parse(localStorage.getItem('portfolioItems') || '[]'));</div>
            <button class="btn" onclick="runScript1()">実行</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">2. データを手動修正</div>
            <div class="script-code">// データを取得
const items = JSON.parse(localStorage.getItem('portfolioItems') || '[]');
console.log('Before fix:', items);

// 修正
const fixedItems = items.map(item => ({
    ...item,
    filePath: item.filename ? `videos/${item.filename}` : null,
    type: item.filename && item.filename.toLowerCase().includes('.mp4') ? 'video' : 'image',
    mimeType: 'video/mp4'
}));

// 保存
localStorage.setItem('portfolioItems', JSON.stringify(fixedItems));
console.log('After fix:', fixedItems);
console.log('✅ Data fixed!');</div>
            <button class="btn" onclick="runScript2()">実行</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">3. データを完全クリア</div>
            <div class="script-code">localStorage.removeItem('portfolioItems');
console.log('✅ Data cleared!');</div>
            <button class="btn" onclick="runScript3()">実行</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">4. テストデータを作成</div>
            <div class="script-code">const testData = [{
    id: Date.now(),
    title: "Test Video",
    description: "Test video description",
    category: "portfolio",
    filename: "test.mp4",
    filePath: "videos/test.mp4",
    type: "video",
    mimeType: "video/mp4",
    uploadDate: new Date().toISOString(),
    size: 1024000
}];

localStorage.setItem('portfolioItems', JSON.stringify(testData));
console.log('✅ Test data created:', testData);</div>
            <button class="btn" onclick="runScript4()">実行</button>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>📋 手順</h3>
            <ol>
                <li><strong>F12</strong> で開発者ツールを開く</li>
                <li><strong>Console</strong> タブをクリック</li>
                <li>上記の「実行」ボタンをクリック（または手動でコードをコピペ）</li>
                <li>インタラクティブサイトで <strong>REFRESH</strong> ボタンをクリック</li>
            </ol>
        </div>
    </div>

    <script>
        function runScript1() {
            console.log('Current data:', JSON.parse(localStorage.getItem('portfolioItems') || '[]'));
        }
        
        function runScript2() {
            // データを取得
            const items = JSON.parse(localStorage.getItem('portfolioItems') || '[]');
            console.log('Before fix:', items);

            // 修正
            const fixedItems = items.map(item => ({
                ...item,
                filePath: item.filename ? `videos/${item.filename}` : null,
                type: item.filename && item.filename.toLowerCase().includes('.mp4') ? 'video' : 'image',
                mimeType: 'video/mp4'
            }));

            // 保存
            localStorage.setItem('portfolioItems', JSON.stringify(fixedItems));
            console.log('After fix:', fixedItems);
            console.log('✅ Data fixed!');
            
            alert('データを修正しました！コンソールを確認してください。');
        }
        
        function runScript3() {
            if (confirm('本当に全データを削除しますか？')) {
                localStorage.removeItem('portfolioItems');
                console.log('✅ Data cleared!');
                alert('データを削除しました！');
            }
        }
        
        function runScript4() {
            const testData = [{
                id: Date.now(),
                title: "Test Video",
                description: "Test video description",
                category: "portfolio",
                filename: "test.mp4",
                filePath: "videos/test.mp4",
                type: "video",
                mimeType: "video/mp4",
                uploadDate: new Date().toISOString(),
                size: 1024000
            }];

            localStorage.setItem('portfolioItems', JSON.stringify(testData));
            console.log('✅ Test data created:', testData);
            alert('テストデータを作成しました！コンソールを確認してください。');
        }
    </script>
</body>
</html>

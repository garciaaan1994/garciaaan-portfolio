<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒ¼ã‚¿ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .script-box {
            background: #333;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }
        
        .script-title {
            color: #4caf50;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .script-code {
            background: #222;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            color: #0f0;
            overflow-x: auto;
            white-space: pre;
        }
        
        .btn {
            background: #4caf50;
            border: none;
            color: #000;
            padding: 8px 15px;
            margin: 5px;
            cursor: pointer;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ãƒ‡ãƒ¼ã‚¿ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</h1>
        
        <p>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§Consoleã‚¿ãƒ–ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š</p>
        
        <div class="script-box">
            <div class="script-title">1. ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</div>
            <div class="script-code">console.log('Current data:', JSON.parse(localStorage.getItem('portfolioItems') || '[]'));</div>
            <button class="btn" onclick="runScript1()">å®Ÿè¡Œ</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">2. ãƒ‡ãƒ¼ã‚¿ã‚’æ‰‹å‹•ä¿®æ­£</div>
            <div class="script-code">// ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
const items = JSON.parse(localStorage.getItem('portfolioItems') || '[]');
console.log('Before fix:', items);

// ä¿®æ­£
const fixedItems = items.map(item => ({
    ...item,
    filePath: item.filename ? `videos/${item.filename}` : null,
    type: item.filename && item.filename.toLowerCase().includes('.mp4') ? 'video' : 'image',
    mimeType: 'video/mp4'
}));

// ä¿å­˜
localStorage.setItem('portfolioItems', JSON.stringify(fixedItems));
console.log('After fix:', fixedItems);
console.log('âœ… Data fixed!');</div>
            <button class="btn" onclick="runScript2()">å®Ÿè¡Œ</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">3. ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨ã‚¯ãƒªã‚¢</div>
            <div class="script-code">localStorage.removeItem('portfolioItems');
console.log('âœ… Data cleared!');</div>
            <button class="btn" onclick="runScript3()">å®Ÿè¡Œ</button>
        </div>
        
        <div class="script-box">
            <div class="script-title">4. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ</div>
            <div class="script-code">const testData = [{
    id: Date.now(),
    title: "Test Video",
    description: "Test video description",
    category: "portfolio",
    filename: "test.mp4",
    filePath: "videos/test.mp4",
    type: "video",
    mimeType: "video/mp4",
    uploadDate: new Date().toISOString(),
    size: 1024000
}];

localStorage.setItem('portfolioItems', JSON.stringify(testData));
console.log('âœ… Test data created:', testData);</div>
            <button class="btn" onclick="runScript4()">å®Ÿè¡Œ</button>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>ğŸ“‹ æ‰‹é †</h3>
            <ol>
                <li><strong>F12</strong> ã§é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã</li>
                <li><strong>Console</strong> ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>ä¸Šè¨˜ã®ã€Œå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ˆã¾ãŸã¯æ‰‹å‹•ã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒšï¼‰</li>
                <li>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚µã‚¤ãƒˆã§ <strong>REFRESH</strong> ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
        </div>
    </div>

    <script>
        function runScript1() {
            console.log('Current data:', JSON.parse(localStorage.getItem('portfolioItems') || '[]'));
        }
        
        function runScript2() {
            // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const items = JSON.parse(localStorage.getItem('portfolioItems') || '[]');
            console.log('Before fix:', items);

            // ä¿®æ­£
            const fixedItems = items.map(item => ({
                ...item,
                filePath: item.filename ? `videos/${item.filename}` : null,
                type: item.filename && item.filename.toLowerCase().includes('.mp4') ? 'video' : 'image',
                mimeType: 'video/mp4'
            }));

            // ä¿å­˜
            localStorage.setItem('portfolioItems', JSON.stringify(fixedItems));
            console.log('After fix:', fixedItems);
            console.log('âœ… Data fixed!');
            
            alert('ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã¾ã—ãŸï¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        }
        
        function runScript3() {
            if (confirm('æœ¬å½“ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('portfolioItems');
                console.log('âœ… Data cleared!');
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸï¼');
            }
        }
        
        function runScript4() {
            const testData = [{
                id: Date.now(),
                title: "Test Video",
                description: "Test video description",
                category: "portfolio",
                filename: "test.mp4",
                filePath: "videos/test.mp4",
                type: "video",
                mimeType: "video/mp4",
                uploadDate: new Date().toISOString(),
                size: 1024000
            }];

            localStorage.setItem('portfolioItems', JSON.stringify(testData));
            console.log('âœ… Test data created:', testData);
            alert('ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã—ãŸï¼ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        }
    </script>
</body>
</html>
